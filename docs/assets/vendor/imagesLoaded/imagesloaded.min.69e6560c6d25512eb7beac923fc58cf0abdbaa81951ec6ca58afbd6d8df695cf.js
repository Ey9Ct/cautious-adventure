/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */(function(a,b){'use strict';typeof define=='function'&&define.amd?define(['ev-emitter/ev-emitter'],function(c){return b(a,c)}):typeof module=='object'&&module.exports?module.exports=b(a,require('ev-emitter')):a.imagesLoaded=b(a,a.EvEmitter)})(typeof window!='undefined'?window:this,function(e,g){'use strict';var f=e.jQuery,d=e.console,i,k;function h(a,b){for(var c in b)a[c]=b[c];return a}i=Array.prototype.slice;function j(a){if(Array.isArray(a))return a;var b=typeof a=='object'&&typeof a.length=='number';return b?i.call(a):[a]}function a(b,c,e){if(!(this instanceof a))return new a(b,c,e);var g=b;if(typeof b=='string'&&(g=document.querySelectorAll(b)),!g){d.error('Bad element for imagesLoaded '+(g||b));return}this.elements=j(g),this.options=h({},this.options),typeof c=='function'?e=c:h(this.options,c),e&&this.on('always',e),this.getImages(),f&&(this.jqDeferred=new f.Deferred),setTimeout(this.check.bind(this))}a.prototype=Object.create(g.prototype),a.prototype.options={},a.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},a.prototype.addElementImages=function(b){var c,d,a,f,e,g;if(b.nodeName=='IMG'&&this.addImage(b),this.options.background===!0&&this.addElementBackgroundImages(b),c=b.nodeType,!c||!k[c])return;d=b.querySelectorAll('img');for(a=0;a<d.length;a++)f=d[a],this.addImage(f);if(typeof this.options.background=='string'){e=b.querySelectorAll(this.options.background);for(a=0;a<e.length;a++)g=e[a],this.addElementBackgroundImages(g)}},k={1:!0,9:!0,11:!0},a.prototype.addElementBackgroundImages=function(c){var b=getComputedStyle(c),d,a,e;if(!b)return;for(d=/url\((['"])?(.*?)\1\)/gi,a=d.exec(b.backgroundImage);a!==null;)e=a&&a[2],e&&this.addBackground(e,c),a=d.exec(b.backgroundImage)},a.prototype.addImage=function(a){var c=new b(a);this.images.push(c)},a.prototype.addBackground=function(a,b){var d=new c(a,b);this.images.push(d)},a.prototype.check=function(){var a=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){this.complete();return}function b(b,c,d){setTimeout(function(){a.progress(b,c,d)})}this.images.forEach(function(a){a.once('progress',b),a.check()})},a.prototype.progress=function(a,b,c){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded,this.emitEvent('progress',[this,a,b]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&d&&d.log('progress: '+c,a,b)},a.prototype.complete=function(){var a=this.hasAnyBroken?'fail':'done',b;this.isComplete=!0,this.emitEvent(a,[this]),this.emitEvent('always',[this]),this.jqDeferred&&(b=this.hasAnyBroken?'reject':'resolve',this.jqDeferred[b](this))};function b(a){this.img=a}b.prototype=Object.create(g.prototype),b.prototype.check=function(){var a=this.getIsImageComplete();if(a){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return}this.proxyImage=new Image,this.proxyImage.addEventListener('load',this),this.proxyImage.addEventListener('error',this),this.img.addEventListener('load',this),this.img.addEventListener('error',this),this.proxyImage.src=this.img.src},b.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},b.prototype.confirm=function(a,b){this.isLoaded=a,this.emitEvent('progress',[this,this.img,b])},b.prototype.handleEvent=function(a){var b='on'+a.type;this[b]&&this[b](a)},b.prototype.onload=function(){this.confirm(!0,'onload'),this.unbindEvents()},b.prototype.onerror=function(){this.confirm(!1,'onerror'),this.unbindEvents()},b.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this),this.proxyImage.removeEventListener('error',this),this.img.removeEventListener('load',this),this.img.removeEventListener('error',this)};function c(a,b){this.url=a,this.element=b,this.img=new Image}return c.prototype=Object.create(b.prototype),c.prototype.check=function(){this.img.addEventListener('load',this),this.img.addEventListener('error',this),this.img.src=this.url;var a=this.getIsImageComplete();a&&(this.confirm(this.img.naturalWidth!==0,'naturalWidth'),this.unbindEvents())},c.prototype.unbindEvents=function(){this.img.removeEventListener('load',this),this.img.removeEventListener('error',this)},c.prototype.confirm=function(a,b){this.isLoaded=a,this.emitEvent('progress',[this,this.element,b])},a})