/*!
 * Name    : Video Background Extension for Jarallax
 * Version : 1.0.1
 * Author  : nK <https://nkdev.info>
 * GitHub  : https://github.com/nk-o/jarallax
 */!function(c){var b={};function a(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return c[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=c,a.c=b,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,d){var c,e;if(1&d&&(b=a(b)),8&d)return b;if(4&d&&"object"==typeof b&&b&&b.__esModule)return b;if(c=Object.create(null),a.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:b}),2&d&&"string"!=typeof b)for(e in b)a.d(c,e,function(a){return b[a]}.bind(null,e));return c},a.n=function(b){var c=b&&b.__esModule?function(){return b.default}:function(){return b};return a.d(c,"a",c),c},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="",a(a.s=6)}([,,function(a,b){a.exports=function(a){"complete"===document.readyState||"interactive"===document.readyState?a.call():document.attachEvent?document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&a.call()}):document.addEventListener&&document.addEventListener("DOMContentLoaded",a)}},function(a,c,b){(function(b){var c="undefined"!=typeof window?window:void 0!==b?b:"undefined"!=typeof self?self:{};a.exports=c}).call(this,b(4))},function(c,d){function b(a){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var a=function(){return this}();try{a=a||new Function("return this")()}catch(c){"object"===("undefined"==typeof window?"undefined":b(window))&&(a=window)}c.exports=a},,function(a,c,b){a.exports=b(7)},function(i,d,a){"use strict";a.r(d);var e=a(8),f=a(3),b=a.n(f),c=a(2),g=a.n(c),h=a(9);b.a.VideoWorker=b.a.VideoWorker||e.default,Object(h.default)(),g()(function(){void 0!==b.a.jarallax&&b.a.jarallax(document.querySelectorAll("[data-jarallax-video]"))})},function(p,o,c){"use strict";var n,a,i,d,b,g,f,j,e,k;c.r(o),c.d(o,"default",function(){return k}),n=c(3),a=c.n(n);function m(a){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function l(d,c){for(var b=0,a;b<c.length;b++)a=c[b],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}function h(){this.doneCallbacks=[],this.failCallbacks=[]}h.prototype={execute:function(b,a){var c=b.length;for(a=Array.prototype.slice.call(a);c;)b[--c].apply(null,a)},resolve:function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];this.execute(this.doneCallbacks,c)},reject:function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];this.execute(this.failCallbacks,c)},done:function(a){this.doneCallbacks.push(a)},fail:function(a){this.failCallbacks.push(a)}},i=0,d=0,b=0,g=0,f=0,j=new h,e=new h,k=function(){function c(b,d){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c);var a=this;a.url=b,a.options_default={autoplay:!1,loop:!1,mute:!1,volume:100,showContols:!0,startTime:0,endTime:0},a.options=a.extend({},a.options_default,d),a.videoID=a.parseURL(b),a.videoID&&(a.ID=i,i+=1,a.loadAPI(),a.init())}var h,k,n;return h=c,(k=[{key:"extend",value:function(){for(var c=arguments.length,a=new Array(c),b=0,d;b<c;b++)a[b]=arguments[b];return d=a[0]||{},Object.keys(a).forEach(function(b){a[b]&&Object.keys(a[b]).forEach(function(c){d[c]=a[b][c]})}),d}},{key:"parseURL",value:function(a){var b,c,f,d,e,g=!(!(b=a.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/))||11!==b[1].length)&&b[1],h=!(!(c=a.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/))||!c[3])&&c[3],i=(f=a.split(/,(?=mp4\:|webm\:|ogv\:|ogg\:)/),d={},e=0,f.forEach(function(b){var a=b.match(/^(mp4|webm|ogv|ogg)\:(.*)/);a&&a[1]&&a[2]&&(d["ogv"===a[1]?"ogg":a[1]]=a[2],e=1)}),!!e&&d);return g?(this.type="youtube",g):h?(this.type="vimeo",h):!!i&&(this.type="local",i)}},{key:"isValid",value:function(){return!!this.videoID}},{key:"on",value:function(a,b){this.userEventsList=this.userEventsList||[],(this.userEventsList[a]||(this.userEventsList[a]=[])).push(b)}},{key:"off",value:function(a,b){var c=this;this.userEventsList&&this.userEventsList[a]&&(b?this.userEventsList[a].forEach(function(d,e){d===b&&(c.userEventsList[a][e]=!1)}):delete this.userEventsList[a])}},{key:"fire",value:function(c){for(var e=this,b=arguments.length,d=new Array(1<b?b-1:0),a=1;a<b;a++)d[a-1]=arguments[a];this.userEventsList&&void 0!==this.userEventsList[c]&&this.userEventsList[c].forEach(function(a){a&&a.apply(e,d)})}},{key:"play",value:function(c){var b=this;b.player&&("youtube"===b.type&&b.player.playVideo&&(void 0!==c&&b.player.seekTo(c||0),a.a.YT.PlayerState.PLAYING!==b.player.getPlayerState()&&b.player.playVideo()),"vimeo"===b.type&&(void 0!==c&&b.player.setCurrentTime(c),b.player.getPaused().then(function(a){a&&b.player.play()})),"local"===b.type&&(void 0!==c&&(b.player.currentTime=c),b.player.paused&&b.player.play()))}},{key:"pause",value:function(){var b=this;b.player&&("youtube"===b.type&&b.player.pauseVideo&&a.a.YT.PlayerState.PLAYING===b.player.getPlayerState()&&b.player.pauseVideo(),"vimeo"===b.type&&b.player.getPaused().then(function(a){a||b.player.pause()}),"local"===b.type&&(b.player.paused||b.player.pause()))}},{key:"mute",value:function(){var a=this;a.player&&("youtube"===a.type&&a.player.mute&&a.player.mute(),"vimeo"===a.type&&a.player.setVolume&&a.player.setVolume(0),"local"===a.type&&(a.$video.muted=!0))}},{key:"unmute",value:function(){var a=this;a.player&&("youtube"===a.type&&a.player.mute&&a.player.unMute(),"vimeo"===a.type&&a.player.setVolume&&a.player.setVolume(a.options.volume),"local"===a.type&&(a.$video.muted=!1))}},{key:"setVolume",value:function(c){var b=0<arguments.length&&void 0!==c&&c,a=this;a.player&&b&&("youtube"===a.type&&a.player.setVolume&&a.player.setVolume(b),"vimeo"===a.type&&a.player.setVolume&&a.player.setVolume(b),"local"===a.type&&(a.$video.volume=b/100))}},{key:"getVolume",value:function(b){var a=this;a.player?("youtube"===a.type&&a.player.getVolume&&b(a.player.getVolume()),"vimeo"===a.type&&a.player.getVolume&&a.player.getVolume().then(function(a){b(a)}),"local"===a.type&&b(100*a.$video.volume)):b(!1)}},{key:"getMuted",value:function(b){var a=this;a.player?("youtube"===a.type&&a.player.isMuted&&b(a.player.isMuted()),"vimeo"===a.type&&a.player.getVolume&&a.player.getVolume().then(function(a){b(!!a)}),"local"===a.type&&b(a.$video.muted)):b(null)}},{key:"getImageURL",value:function(e){var c,b,f,d,a=this;a.videoImage?e(a.videoImage):("youtube"===a.type&&(c=["maxresdefault","sddefault","hqdefault","0"],b=0,(f=new Image).onload=function(){120!==(this.naturalWidth||this.width)||b===c.length-1?(a.videoImage="https://img.youtube.com/vi/".concat(a.videoID,"/").concat(c[b],".jpg"),e(a.videoImage)):(b+=1,this.src="https://img.youtube.com/vi/".concat(a.videoID,"/").concat(c[b],".jpg"))},f.src="https://img.youtube.com/vi/".concat(a.videoID,"/").concat(c[b],".jpg")),"vimeo"===a.type&&((d=new XMLHttpRequest).open("GET","https://vimeo.com/api/v2/video/".concat(a.videoID,".json"),!0),d.onreadystatechange=function(){var b;4===this.readyState&&200<=this.status&&this.status<400&&(b=JSON.parse(this.responseText),a.videoImage=b[0].thumbnail_large,e(a.videoImage))},d.send(),d=null))}},{key:"getIframe",value:function(a){this.getVideo(a)}},{key:"getVideo",value:function(c){var b=this;b.$video?c(b.$video):b.onAPIready(function(){var d,f,g,h,i,e,j,k;b.$video||((d=document.createElement("div")).style.display="none"),"youtube"===b.type&&(b.playerOptions={},b.playerOptions.videoId=b.videoID,b.playerOptions.playerVars={autohide:1,rel:0,autoplay:0,playsinline:1},b.options.showContols||(b.playerOptions.playerVars.iv_load_policy=3,b.playerOptions.playerVars.modestbranding=1,b.playerOptions.playerVars.controls=0,b.playerOptions.playerVars.showinfo=0,b.playerOptions.playerVars.disablekb=1),b.playerOptions.events={onReady:function(a){b.options.mute?a.target.mute():b.options.volume&&a.target.setVolume(b.options.volume),b.options.autoplay&&b.play(b.options.startTime),b.fire("ready",a),b.options.loop&&!b.options.endTime&&(b.options.endTime=b.player.getDuration()-.1),setInterval(function(){b.getVolume(function(c){b.options.volume!==c&&(b.options.volume=c,b.fire("volumechange",a))})},150)},onStateChange:function(c){b.options.loop&&c.data===a.a.YT.PlayerState.ENDED&&b.play(b.options.startTime),f||c.data!==a.a.YT.PlayerState.PLAYING||(f=1,b.fire("started",c)),c.data===a.a.YT.PlayerState.PLAYING&&b.fire("play",c),c.data===a.a.YT.PlayerState.PAUSED&&b.fire("pause",c),c.data===a.a.YT.PlayerState.ENDED&&b.fire("ended",c),c.data===a.a.YT.PlayerState.PLAYING?g=setInterval(function(){b.fire("timeupdate",c),b.options.endTime&&b.player.getCurrentTime()>=b.options.endTime&&(b.options.loop?b.play(b.options.startTime):b.pause())},150):clearInterval(g)},onError:function(a){b.fire("error",a)}},(h=!b.$video)&&((i=document.createElement("div")).setAttribute("id",b.playerID),d.appendChild(i),document.body.appendChild(d)),b.player=b.player||new a.a.YT.Player(b.playerID,b.playerOptions),h&&(b.$video=document.getElementById(b.playerID),b.videoWidth=parseInt(b.$video.getAttribute("width"),10)||1280,b.videoHeight=parseInt(b.$video.getAttribute("height"),10)||720)),"vimeo"===b.type&&(b.playerOptions={id:b.videoID,autopause:0,transparent:0,autoplay:b.options.autoplay?1:0,loop:b.options.loop?1:0,muted:b.options.mute?1:0},b.options.volume&&(b.playerOptions.volume=b.options.volume),b.options.showContols||(b.playerOptions.badge=0,b.playerOptions.byline=0,b.playerOptions.portrait=0,b.playerOptions.title=0,b.playerOptions.background=1),b.$video||(e="",Object.keys(b.playerOptions).forEach(function(a){""!==e&&(e+="&"),e+="".concat(a,"=").concat(encodeURIComponent(b.playerOptions[a]))}),b.$video=document.createElement("iframe"),b.$video.setAttribute("id",b.playerID),b.$video.setAttribute("src","https://player.vimeo.com/video/".concat(b.videoID,"?").concat(e)),b.$video.setAttribute("frameborder","0"),b.$video.setAttribute("mozallowfullscreen",""),b.$video.setAttribute("allowfullscreen",""),d.appendChild(b.$video),document.body.appendChild(d)),b.player=b.player||new a.a.Vimeo.Player(b.$video,b.playerOptions),b.options.startTime&&b.options.autoplay&&b.player.setCurrentTime(b.options.startTime),b.player.getVideoWidth().then(function(a){b.videoWidth=a||1280}),b.player.getVideoHeight().then(function(a){b.videoHeight=a||720}),b.player.on("timeupdate",function(a){j||(b.fire("started",a),j=1),b.fire("timeupdate",a),b.options.endTime&&b.options.endTime&&a.seconds>=b.options.endTime&&(b.options.loop?b.play(b.options.startTime):b.pause())}),b.player.on("play",function(a){b.fire("play",a),b.options.startTime&&0===a.seconds&&b.play(b.options.startTime)}),b.player.on("pause",function(a){b.fire("pause",a)}),b.player.on("ended",function(a){b.fire("ended",a)}),b.player.on("loaded",function(a){b.fire("ready",a)}),b.player.on("volumechange",function(a){b.fire("volumechange",a)}),b.player.on("error",function(a){b.fire("error",a)})),"local"===b.type&&(b.$video||(b.$video=document.createElement("video"),b.options.showContols&&(b.$video.controls=!0),b.options.mute?b.$video.muted=!0:b.$video.volume&&(b.$video.volume=b.options.volume/100),b.options.loop&&(b.$video.loop=!0),b.$video.setAttribute("playsinline",""),b.$video.setAttribute("webkit-playsinline",""),b.$video.setAttribute("id",b.playerID),d.appendChild(b.$video),document.body.appendChild(d),Object.keys(b.videoID).forEach(function(c){var d,e,f,a;d=b.$video,e=b.videoID[c],f="video/".concat(c),(a=document.createElement("source")).src=e,a.type=f,d.appendChild(a)})),b.player=b.player||b.$video,b.player.addEventListener("playing",function(a){k||b.fire("started",a),k=1}),b.player.addEventListener("timeupdate",function(a){b.fire("timeupdate",a),b.options.endTime&&b.options.endTime&&this.currentTime>=b.options.endTime&&(b.options.loop?b.play(b.options.startTime):b.pause())}),b.player.addEventListener("play",function(a){b.fire("play",a)}),b.player.addEventListener("pause",function(a){b.fire("pause",a)}),b.player.addEventListener("ended",function(a){b.fire("ended",a)}),b.player.addEventListener("loadedmetadata",function(){b.videoWidth=this.videoWidth||1280,b.videoHeight=this.videoHeight||720,b.fire("ready"),b.options.autoplay&&b.play(b.options.startTime)}),b.player.addEventListener("volumechange",function(a){b.getVolume(function(a){b.options.volume=a}),b.fire("volumechange",a)}),b.player.addEventListener("error",function(a){b.fire("error",a)})),c(b.$video)})}},{key:"init",value:function(){this.playerID="VideoWorker-".concat(this.ID)}},{key:"loadAPI",value:function(){if(!d||!b){var c,f,e="";if("youtube"!==this.type||d||(d=1,e="https://www.youtube.com/iframe_api"),"vimeo"===this.type&&!b){if(b=1,void 0!==a.a.Vimeo)return;e="https://player.vimeo.com/api/player.js"}e&&(c=document.createElement("script"),f=document.getElementsByTagName("head")[0],c.src=e,f.appendChild(c),c=f=null)}}},{key:"onAPIready",value:function(b){var c;"youtube"===this.type&&(void 0!==a.a.YT&&0!==a.a.YT.loaded||g?"object"===m(a.a.YT)&&1===a.a.YT.loaded?b():j.done(function(){b()}):(g=1,window.onYouTubeIframeAPIReady=function(){window.onYouTubeIframeAPIReady=null,j.resolve("done"),b()})),"vimeo"===this.type&&(void 0!==a.a.Vimeo||f?void 0!==a.a.Vimeo?b():e.done(function(){b()}):(f=1,c=setInterval(function(){void 0!==a.a.Vimeo&&(clearInterval(c),e.resolve("done"),b())},20))),"local"===this.type&&b()}}])&&l(h.prototype,k),n&&l(h,n),c}()},function(g,b,a){"use strict";a.r(b),a.d(b,"default",function(){return c});var d=a(8),e=a(3),f=a.n(e);function c(){var a,b,c,e,g,h,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.a.jarallax;void 0!==i&&(a=i.constructor,b=a.prototype.onScroll,a.prototype.onScroll=function(){var a=this;b.apply(a),a.isVideoInserted||!a.video||a.options.videoLazyLoading&&!a.isElementInViewport||a.options.disableVideo()||(a.isVideoInserted=!0,a.video.getVideo(function(b){var c=b.parentNode;a.css(b,{position:a.image.position,top:"0px",left:"0px",right:"0px",bottom:"0px",width:"100%",height:"100%",maxWidth:"none",maxHeight:"none",pointerEvents:"none",transformStyle:"preserve-3d",backfaceVisibility:"hidden",willChange:"transform,opacity",margin:0,zIndex:-1}),a.$video=b,"local"===a.video.type&&(a.image.src?a.$video.setAttribute("poster",a.image.src):a.image.$item&&"IMG"===a.image.$item.tagName&&a.image.$item.src&&a.$video.setAttribute("poster",a.image.$item.src)),a.image.$container.appendChild(b),c.parentNode.removeChild(c)}))},c=a.prototype.coverImage,a.prototype.coverImage=function(){var d,e,h,f,a=this,b=c.apply(a),g=!!a.image.$item&&a.image.$item.nodeName;return b&&a.video&&g&&("IFRAME"===g||"VIDEO"===g)&&(e=(d=b.image.height)*a.image.width/a.image.height,h=(b.container.width-e)/2,f=b.image.marginTop,b.container.width>e&&(d=(e=b.container.width)*a.image.height/a.image.width,h=0,f+=(b.image.height-d)/2),"IFRAME"===g&&(d+=400,f-=200),a.css(a.$video,{width:"".concat(e,"px"),marginLeft:"".concat(h,"px"),height:"".concat(d,"px"),marginTop:"".concat(f,"px")})),b},e=a.prototype.initImg,a.prototype.initImg=function(){var a=this,b=e.apply(a);return a.options.videoSrc||(a.options.videoSrc=a.$item.getAttribute("data-jarallax-video")||null),a.options.videoSrc?(a.defaultInitImgResult=b,!0):b},g=a.prototype.canInitParallax,a.prototype.canInitParallax=function(){var a=this,c=g.apply(a),b;if(!a.options.videoSrc)return c;b=new d.default(a.options.videoSrc,{autoplay:!0,loop:a.options.videoLoop,showContols:!1,startTime:a.options.videoStartTime||0,endTime:a.options.videoEndTime||0,mute:a.options.videoVolume?0:1,volume:a.options.videoVolume||0});function e(){a.image.$default_item&&(a.image.$item=a.image.$default_item,a.image.$item.style.display="block",a.coverImage(),a.clipContainer(),a.onScroll())}if(b.isValid())if(this.options.disableParallax()&&(c=!0,a.image.position="absolute",a.options.type="scroll",a.options.speed=1),c){if(b.on("ready",function(){var c;a.options.videoPlayOnlyVisible?(c=a.onScroll,a.onScroll=function(){c.apply(a),a.videoError||!a.options.videoLoop&&(a.options.videoLoop||a.videoEnded)||(a.isVisible()?b.play():b.pause())}):b.play()}),b.on("started",function(){a.image.$default_item=a.image.$item,a.image.$item=a.$video,a.image.width=a.video.videoWidth||1280,a.image.height=a.video.videoHeight||720,a.coverImage(),a.clipContainer(),a.onScroll(),a.image.$default_item&&(a.image.$default_item.style.display="none")}),b.on("ended",function(){a.videoEnded=!0,a.options.videoLoop||e()}),b.on("error",function(){a.videoError=!0,e()}),a.video=b,!a.defaultInitImgResult&&(a.image.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7","local"!==b.type))return b.getImageURL(function(b){a.image.bgImage='url("'.concat(b,'")'),a.init()}),!1}else a.defaultInitImgResult||b.getImageURL(function(c){var b=a.$item.getAttribute("style");b&&a.$item.setAttribute("data-jarallax-original-styles",b),a.css(a.$item,{"background-image":'url("'.concat(c,'")'),"background-position":"center","background-size":"cover"})});return c},h=a.prototype.destroy,a.prototype.destroy=function(){var a=this;a.image.$default_item&&(a.image.$item=a.image.$default_item,delete a.image.$default_item),h.apply(a)})}}])